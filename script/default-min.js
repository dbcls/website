function dispLoading(e){$(".main__contents").append("<div id='loading'><img src='/img/loading.gif' /></div>")}function removeLoading(){$("#loading").remove()}var meta=document.createElement("META");meta.setAttribute("HTTP-EQUIV","Content-Security-Policy"),meta.setAttribute("CONTENT","default-src 'self'; \n        script-src 'self' 'unsafe-inline' 'unsafe-eval' code.jquery.com www.googletagmanager.com; \n        font-src 'self' fonts.googleapis.com fonts.gstatic.com;"),document.head.appendChild(meta);var script=document.createElement("script"),script_sticky=document.createElement("script"),link_favicon=document.createElement("link"),tags={public_relations:"広報",services:"サービス",events:"イベント",registration:"募集",other:"その他"};script.setAttribute("src","https://code.jquery.com/jquery-3.2.1.min.js"),script_sticky.setAttribute("src","/script/stickyfill.min.js"),link_favicon.setAttribute("rel","icon"),link_favicon.setAttribute("type","image/png"),link_favicon.setAttribute("href","/img/favicon.png"),document.head.appendChild(script),document.head.appendChild(script_sticky),document.head.appendChild(link_favicon);var setData=e=>{var a=e.feed.entry,t=(a=a.map(e=>e.gs$cell)).map(e=>e.col);t=Math.max.apply(null,t);var i=a.map(e=>e.row);i=Math.max.apply(null,i);var n=[];a=a.map(e=>(e.row=Number(e.row)-1,e.col=Number(e.col)-1,e));var s=[],r=[];for(let e=0;e<i;e++){r.push([]);for(let a=0;a<t;a++)r[e].push("")}for(let e=0;e<a.length;e++){let t=a[e];r[t.row][t.col]=t.$t}return r},initialize={index:function(){function e(){var e=$(".main-image__contents DIV.active");0==e.length&&(e=$(".main-image__contents DIV:last"));var a=e.next().length?e.next():$(".main-image__contents DIV:first");e.addClass("last-active"),a.css({opacity:0}).addClass("active").animate({opacity:1},1e3,function(){e.removeClass("active last-active")})}var a=$("html").attr("lang");$(".news__individual-wrapper").css("display","block");var t,i,n=window.location.href.split("/").pop(),s;Object.keys(tags).map(function(e){$('a[tag="'+e+'"]').before('<img src="/img/icon_tag_'+e+'.svg" class="news__tag-icon" alt="" >')}),"ja"===a&&$(".tag_name").each(function(){var e=$(this).text();e=$.trim(e);var a=tags[e];$(this).text(a)}),setInterval(function(){e()},5e3)},news:function(){var e="";"events.html"===(e=""===(e=document.referrer)?"direct":e.match(".+/(.+?)([?#;].*)?$")[1])||"events-en.html"===e?(setTimeout(function(){$(".tag-event").trigger("click")},0),setTimeout(function(){$(".news__individual-wrapper").css("display","block")},500)):$(".news__individual-wrapper").css("display","block");var a,t,i=window.location.href.split("/").pop(),n;Object.keys(tags).map(function(e){$('a[tag="'+e+'"]').before('<img src="/img/icon_tag_'+e+'.svg" class="news__tag-icon" alt="" >')}),"news.html"===i&&$(".tag_name").each(function(){var e=$(this).text();e=$.trim(e);var a=tags[e];$(this).text(a)}),$(".post__individual").each(function(){var e=$(this).attr("class");e=(e=(e=(e=e.match(/\[\"(.+?)\"\]/g))[0].match(/\"(.+?)\"/g)).join(" ")).replace(/"/g,""),$(this).addClass(e)})},post:function(){var e,a=window.location.href.split("/"),t=a.pop(),i;Object.keys(tags).map(function(e){$('a[tag="'+e+'"]').before('<img src="/img/icon_tag_'+e+'.svg" class="news__tag-icon" alt="" >')}),marked($(".markdown-body").html()),a.indexOf("ja")>=0&&$(".tag_name").each(function(){var e=$(this).text();e=$.trim(e);var a=tags[e];$(this).text(a)}),$(document).ready(function(){$("a[href^='http']:not([href*='"+location.hostname+"'])").attr("target","_blank")})},about:function(){$(".lazy-mail").each(function(){var e=this;setTimeout(function(){var a=jQuery(e),t=a.data("address").split("_at_").join("@").split("_dot_").join(".");a.attr("href","mailto:"+t).text(t)},1e3)})},history:function(){var e=$(".table-history").height();$(".history__vertival-line").css("height",e),$(".history__vertival-dotted").css("top",e+12)},funding:function(){},faq:function(){},policy:function(){},logotype:function(){},research:function(){},publications:function(){},references:function(){dispLoading("処理中..."),$.ajax({url:"./json/paper.json",dataType:"json",async:!0,success:function(e){function a(){"en"===document.documentElement.lang?($(".main__content-title").text("Papers Citing our services"),$(".publications__wrapper").append(g)):"ja"===document.documentElement.lang&&($(".main__content-title").text("引用文献一覧"),$(".publications__wrapper").append(g))}function t(e){location.hash=e;var a=e.replace("%20"," ");$(".main__content-title").text(a),$(".publications__wrapper").empty();var t=[];t=(t=u[a]).filter(e=>"Original"!==e[1]);for(var i="",s=0;s<t.length;s++)i+='<div class="publications__column__wrapper"><h4 class="publications__column__title">'+t[s][c]+'</h4><p class="publications__column__pubmed"><span class="publications__column__title-small">Pubmed: </span><a href="https://www.ncbi.nlm.nih.gov/pubmed/?term='+t[s][2]+'">https://www.ncbi.nlm.nih.gov/pubmed/?term='+t[s][2]+'</a></p><p class="publications__column__DOI"><span class="publications__column__title-small">DOI: </span><a href="'+t[s][r]+'">'+t[s][r]+'</a></p><div class="publications__column__wrapper-small"><i class="fa fa-user" aria-hidden="true"></i><p>'+t[s][o]+'</p><i class="fa fa-clock-o" aria-hidden="true"></i><p>'+t[s][p]+'</p><i class="fa fa-book" aria-hidden="true"></i><p>'+t[s][l]+'</p><i class="fa fa-quote-right" aria-hidden="true"></i><p>'+t[s][n]+"</p></div></div>";$(".publications__wrapper").append(i)}removeLoading();var i=0,n=0,s=0,r=0,c=0,o=0,l=0,p=0,m=setData(e);m[0].forEach((e,a)=>{"Web server"===e?i=a:"Citation"===e?n=a:"PMID"===e?s=a:"DOI"===e?r=a:"Title"===e?c=a:"First author"===e?o=a:"Journal"===e?l=a:"(e)pub date"===e&&(p=a)});for(var d=[],v=0;v<m.length;v++)d.push(m[v][0]);d=_.rest(d,2),d=_.uniq(d);for(var u={},v=0;v<d.length;v++){var h=d[v];u[h]=m.filter(e=>e[0]===h)}var g="",f=Object.keys(u),b;for(f=f.sort(function(e,a){return u[a].length-u[e].length}),g+='<table class="papers_citing_table"><tbody>',v=0;v<f.length;v++){var w=u[f[v]],y=(w=w.filter(e=>"Original"!==e[1])).length;g+='<tr><td><div class="filName" data-category="'+f[v]+'">'+f[v]+'</div></td><td><p class="quote_num">'+y+"</p></td></tr>"}(g+="</tbody></table>",a(),$(document).on("click",".filName",function(){t(f=$(this).html())}),$(document).on("click",".quote_num",function(){var e=$(this).parent().prev().find("div");t(f=e.html())}),window.addEventListener("hashchange",function(){var e;""===location.hash?($(".publications__wrapper").empty(),a()):t(location.hash.slice(1))},!1),""===location.hash)||t(location.hash.slice(1))}})},services:function(){function e(){$.ajax({url:"../json/services.json",dataType:"json",async:!0,success:function(e){function a(e,a){var t=0;if("category"===e)for(var n=0;n<i.length;n++)i[1][n]===a&&(t=n);else if("other"===e)for(var n=0;n<i.length;n++)i[0][n]===a&&(t=n);return t}function t(e){var a=[];return"Y"===n[e][m]&&a.push("omics"),"Y"===n[e][d]&&a.push("text-mining"),"Y"===n[e][v]&&a.push("contents"),"Y"===n[e][u]&&a.push("semantic"),"Y"===n[e][_]&&a.push("biologist"),"Y"===n[e][h]&&a.push("application"),"Y"===n[e][g]&&a.push("data-scientist"),"Y"===n[e][f]&&a.push("provider"),a}for(var i=e,n=i.filter(e=>"Y"===e[0]),s="",r=a("other","services_name_en"),c=a("other","services_name_ja"),o=a("other","explanation_ja"),l=a("other","explanation_en"),p=a("other","URL"),m=a("category","Omics tools/データ解析ツール"),d=a("category","Text mining/文献知識抽出"),v=a("category","Contents/コンテンツ"),u=a("category","Semantic web/セマンティックウェブ"),_=a("category","Database user/データベース利用者"),h=a("category","Database application developer/アプリケーション開発者"),g=a("category","Data scientist/大規模データ解析者"),f=a("category","Data provider/データ所有者"),b=a("other","画像"),w={omics:{ja:"データ解析ツール",en:"Omics tools"},contents:{ja:"コンテンツ",en:"contents"},"text-mining":{ja:"文献知識抽出",en:"Text mining"},semantic:{ja:"セマンティックウェブ",en:"Semantic web"},biologist:{ja:"データベース利用者",en:"Database user"},application:{ja:"アプリケーション開発者",en:"Database application developer"},"data-scientist":{ja:"大規模データ解析者",en:"Data scientist"},provider:{ja:" データ所有者",en:"Data provider"}},y,j,k=window.location.href.split("/").pop(),x=0;x<n.length;x++){var C=t(x),T=C.join(" ");function D(e,a){var t="";if("ja"===a)for(var i=0;i<e.length;i++){var n=e[i];t+='<div class="service_category tag_element '+e[i]+'">'+w[n].ja+"</div>"}else if("en"===a)for(var i=0;i<e.length;i++){var n=e[i];t+='<div class="service_category tag_element '+e[i]+'">'+w[n].en+"</div>"}return t}var I=$("html").attr("lang");"ja"===I?s+='<article class="article__section contener-type-box mix '+T+'"><div id="repos_name'+x+'" class="repos_name"><p class="name name_ja" id="'+n[x][r]+'">'+n[x][c]+'</p><div class="keyword">'+n[x][o]+"</div>"+D(C,"ja")+'<div class="btn-box"><a class="page_btn more_btn">詳細</a><a href="'+n[x][p]+'" class="page_btn access_btn" target="_blank">アクセス</a></div></div><div id="repos_image0" class="repos_image"><img src="./img/service_assets/'+n[x][b]+'" alt="'+n[x][r]+'" class="object-fit-img img_services"></div>':"en"===I&&(s+='<article class="article__section contener-type-box mix '+T+'"><div id="repos_name'+x+'" class="repos_name"><p class="name name_en" id="'+n[x][r]+'">'+n[x][r]+'</p><div class="keyword">'+n[x][l]+"</div>"+D(C,"en")+'<div class="btn-box"><a class="page_btn more_btn">more</a><a href="'+n[x][p]+'" class="page_btn access_btn" target="_blank">Access</a></div></div><div id="repos_image0" class="repos_image"><img src="./img/service_assets/'+n[x][b]+'" alt="'+n[x][r]+'" class="object-fit-img img_services"></div>'),s+="</article>"}$("#service_list").append(s);var O=document.querySelector(".service__wrapper"),E=mixitup(O,{multifilter:{enable:!0},debug:{enable:!0}})}})}function a(e){$("html,body").scrollTop(0);var a="";$.ajax({type:"get",url:"../json/services.json",dataType:"json"}).done(function(a){function t(e){for(var a=0,t=0;t<s.length;t++)s[0][t]===e&&(a=t);return a}function i(e){for(var a="",t=[],i=0;i<r.length;i++){var n=r[i][c],s=r[i][o];n===(e=e.replace(/_/g," "))&&(a=r[i][o])}for(var i=0;i<r.length;i++){var n=r[i][c],s;r[i][o]===a&&t.push(r[i][c])}return t}function n(e){$.ajax({type:"get",url:"./services/"+e+".md"}).done(function(e){var a="";a=marked(e);var t=$(".service__wrapper").append($("<div/>").attr({class:"markdown-body"}).html(a))})}var s=a;console.log("services_array",s);var r=s.filter(e=>"Y"===e[0]),c=t("services_name_en"),o=t("services_name_ja"),l=e.replace("_ja",""),p=i(l=l.replace("_en","")),m=[];p.forEach(function(a){a=(a=a.replace(/ /g,"_")).replace(/\//g,"_"),"_ja"===e.slice(-3)?a+="_ja":"_en"===e.slice(-3)&&(a+="_en"),m.push(a)}),$(".service__wrapper").empty(),m.map(e=>{var a,t,i,s="",r;n(e+"_"+(s=window.location.href.split("/").pop().match(/services-en\.html/)?"en":"ja"))})})}var t="",i,n,s,r=window.location.href.split("/").pop();r.match(/#[\w_]/)?a(r=(r=r.replace("services.html#","")).replace("services-en.html#","")):e(),$(document).on("click",".more_btn",function(){var e=$(this).parent().siblings(".name").attr("id"),a=$(this).parent().siblings(".name").attr("class");e=e.replace(/ /g,"_"),location.hash=e}),window.addEventListener("hashchange",function(){if(""===location.hash){$(".facet_section").toggleClass("off"),$(".service__wrapper").empty();var t=document.querySelector(".service__wrapper"),i;mixitup(t,{multifilter:{enable:!0},debug:{enable:!0}}).destroy(),e()}else{var n=location.hash.slice(1);$(".facet_section").toggleClass("off"),a(n)}},!1)},events:function(){$(".news__individual-wrapper").css("display","block");var e,a,t=window.location.href.split("/").pop(),i;Object.keys(tags).map(function(e){$('a[tag="'+e+'"]').before('<img src="/img/icon_tag_'+e+'.svg" class="news__tag-icon" alt="" >')});var n=$("html").attr("lang");"ja"===n&&$(".tag_name").each(function(){var e=$(this).text();e=$.trim(e);var a=tags[e];$(this).text(a)}),$.ajax({url:"../json/services.json",dataType:"json",async:!0,success:function(e){function a(e){for(var a=0,i=0;i<t.length;i++)t[0][i]===e&&(a=i);return a}var t=e,i=a("Event掲載"),s=a("services_name_en"),r=a("explanation_ja"),c=a("explanation_en"),o=a("画像"),l=0,p=a("URL"),m,d,v=window.location.href.split("/").pop(),t=t.filter(e=>"Y"===e[i]);"ja"===n?l=r:"en"===n&&(l=c);for(var u="",_=0;_<t.length;_++)u+='<article class="article__section event__section-ja"><div class="article__section__inner"><h4>'+t[_][s]+"</h4><p>"+t[_][l]+'</p><a href = "'+t[_][p]+'" class = "page_btn more_btn" > more </a></div></article>';$(".section-wrapper").append(u)}});var s=document.getElementById("main__contents-event").clientHeight;$("ul.sub__navigation-wrapper li").on("click",function(){$("ul.sub__navigation-wrapper li").removeClass("active"),$(this).addClass("active")}),$(".sub_2").on("click",function(){window.scrollTo(0,s)}),$(".sub_1").on("click",function(){window.scrollTo(0,0)}),$(window).scroll(function(){$(this).scrollTop()>s?($("ul.sub__navigation-wrapper li.sub_1").removeClass("active"),$("ul.sub__navigation-wrapper li.sub_2").addClass("active")):$(this).scrollTop()<s&&($("ul.sub__navigation-wrapper li.sub_2").removeClass("active"),$("ul.sub__navigation-wrapper li.sub_1").addClass("active"))})},members:function(){$.when($.getJSON("../json/members.json"),$.getJSON("../json/services.json")).done(function(e,a){function t(e,a,t){var i="";return e?("Mail"===t?e="mailto:"+e:"GitHub"===t?e="https://github.com/"+e:"ORCID"===t&&(e="https://orcid.org/"+e),i='<a href="'+e+'" class="'+a+'" target="_blank">'+t+"</a>"):i="",i}function i(a){for(var t=0,i=1;i<e.length;i++)e[0][i]===a&&(t=i);return t}var n=$("html").attr("lang"),s="",r="",c="",o="",l="",p="";e=e[0];for(var m,d,v=window.location.href.split("/").pop(),u=i("name ja"),h=i("name en"),g=i("画像"),f=i("position_ja"),b=i("position_en"),w=i("keyword"),y=i("keyword-en"),j=i("ORCID"),k=i("Google Scholar"),x=i("github"),C=i("mail"),T=i("Website"),D=i("いずれのIDも掲載しない"),I=1;I<e.length;I++)e[I][f].match(/客員/)||e[I][f].match(/外来/)?l+='<li><a href="#'+e[I][u]+'">'+e[I][u]+"</a></li>":c+='<li><a href="#'+e[I][u]+'">'+e[I][u]+"</a></li>";for(var I=1;I<e.length;I++)e[I][f].match(/客員/)||e[I][f].match(/外来/)?p+='<li><a href="#'+e[I][h]+'">'+e[I][h]+"</a></li>":o+='<li><a href="#'+e[I][h]+'">'+e[I][h]+"</a></li>";if("ja"===n){$("#memberList").append(c),$("#memberList-collaborators").append(l);for(var O=1;O<e.length;O++){var E=e[O][u],L=e[O][h],Y=e[O][g],q=e[O][f],S=e[O][w],P=e[O][j],A=e[O][k],M=e[O][x],N=e[O][C],R=e[O][T],G=e[O][D],H=t(N,"btn-mail","Mail")+t(M,"btn-github","GitHub")+t(P,"btn-orcid","ORCID")+t(A,"btn-gs","Google Scholar")+t(R,"btn-web","Website");"Yes"===G&&(H=t(N,"btn-mail","Mail")),q.match(/客員/)||q.match(/外来/)?r+='<div class="content__member" id="'+E+'"><div class="repos_image"><img src="./img/member/'+Y+'" alt="'+E+'" class="img_member"></div><ul><li class="position">'+q+'</li><li class="repos_name"><span class="name_ja">'+E+'</span><span class="name_en">'+L+'</span></li><li class="keyword">'+S+'</li><li class="PIC">担当サービス：<div class="member-list__services"></div></li><li class="links"><div class="btn-box">'+H+"</div></li></ul></div>":s+='<div class="content__member" id="'+E+'"><div class="repos_image"><img src="./img/member/'+Y+'" alt="'+E+'" class="img_member"></div><ul><li class="position">'+q+'</li><li class="repos_name"><span class="name_ja">'+E+'</span><span class="name_en">'+L+'</span></li><li class="keyword">'+S+'</li><li class="PIC">担当サービス：<div class="member-list__services"></div></li><li class="links"><div class="btn-box">'+H+"</div></li></ul></div>"}}else if("en"===n){$("#memberList").append(o),$("#memberList-collaborators").append(p);for(var O=1;O<e.length;O++){var E=e[O][u],L=e[O][h],Y=e[O][g],q=e[O][b],S=e[O][w],V=e[O][y],P=e[O][j],A=e[O][k],M=e[O][x],N=e[O][C],R=e[O][T],G=e[O][D],H="";H=t(N,"btn-mail","Mail")+t(M,"btn-github","GitHub")+t(P,"btn-orcid","ORCID")+t(A,"btn-gs","Google Scholar")+t(R,"btn-web","Website"),"Yes"===G&&(H=t(N,"btn-mail","Mail")),q.match(/Guest/)||q.match(/Visiting/)?r+='<div class="content__member" id="'+L+'"><div class="repos_image"><img src="./img/member/'+Y+'" alt="'+L+'" class="img_member"></div><ul><li class="position">'+q+'</li><li class="repos_name"><span class="name_ja">'+E+'</span><span class="name_en">'+L+'</span></li><li class="keyword">'+V+'</li><li class="PIC">Responsible for：<div class="member-list__services"></div></li><li class="links"><div class="btn-box">'+H+"</div></li></ul></div>":s+='<div class="content__member" id="'+L+'"><div class="repos_image"><img src="./img/member/'+Y+'" alt="'+L+'" class="img_member"></div><ul><li class="position">'+q+'</li><li class="repos_name"><span class="name_ja">'+E+'</span><span class="name_en">'+L+'</span></li><li class="keyword">'+V+'</li><li class="PIC">Responsible for：<div class="member-list__services"></div></li><li class="links"><div class="btn-box">'+H+"</div></li></ul></div>"}}$("#member-list").append(s),$("#member-list-collaborators").append(r),a=(a=a[0]).filter(e=>"Y"===e[0]);for(var W=[],O=2;O<a.length;O++)W.push(a[O][7]),W.push(a[O][8]),W.push(a[O][9]);W=_.uniq(W),W=_.compact(W);var z={};W.map(function(e){for(var t=0;t<a.length;t++)e===a[t][7]&&(z[e]+=a[t][3]+",")}),W.map(function(e){for(var t=0;t<a.length;t++)e===a[t][8]&&(z[e]+=a[t][3]+",")}),W.map(function(e){for(var t=0;t<a.length;t++)e===a[t][9]&&(z[e]+=a[t][3]+",")}),$(".name_ja").each(function(){var e=$(this).text();if(e=e.split(" "),z[e[0]]){var a=z[e[0]];a=(a=(a=(a+="").replace("undefined","")).slice(0,-1)).replace(/,/g,", ");var t=$(this).parent().siblings(".PIC").find(".member-list__services");$(t).text(a)}else{var t=$(this).parent().siblings(".PIC");$(t).remove()}})}),$(document).on("click","#memberList li a",function(){setTimeout(function(){var e,a,t=$(window).scrollTop()-.4*$(window).height();$(window).scrollTop(t)},0)})},access:function(){var e=document.getElementById("main__contents-kashiwa").clientHeight;$("ul.sub__navigation-wrapper li").on("click",function(){$("ul.sub__navigation-wrapper li").removeClass("active"),$(this).addClass("active")}),$(".sub_2").on("click",function(){window.scrollTo(0,e)}),$(".sub_1").on("click",function(){window.scrollTo(0,0)}),$(window).scroll(function(){$(this).scrollTop()>e?($("ul.sub__navigation-wrapper li.sub_1").removeClass("active"),$("ul.sub__navigation-wrapper li.sub_2").addClass("active")):$(this).scrollTop()<e&&($("ul.sub__navigation-wrapper li.sub_2").removeClass("active"),$("ul.sub__navigation-wrapper li.sub_1").addClass("active"))})},contact:function(){}};script.addEventListener("load",function(){$(function(){var e=$("html").attr("data-page-type");initialize[e](),console.log(e);var a={index:"index",post:"index",news:"index",about:"about",history:"about",faq:"about",policy:"about",logotype:"about",research:"research",publications:"research",services:"services",references:"services",events:"events",members:"members",access:"access",contact:"contact"},t="",i,n="";Object.keys(a).map(i=>{i===e&&(t=a[e])}),$(".header__nav__contents"+(n="."+t)).find("a").css("border-bottom","2px solid white");var s=window.location,r=s.href;$(".lang-en span").on("click",function(){if(r.match(/\/ja\/\d+\/\d+\/\d+\//))window.location.href=r.replace("/ja/","/en/");else if(s.href.match(/services\.html#/)){var a,a=(a=s.href).replace("services.html","services-en.html");window.location.href=a}else{var a=e+"-en.html";window.location.href=a}}),$(".lang-ja span").on("click",function(){if(r.match(/\/en\/\d+\/\d+\/\d+\//))window.location.href=r.replace("/en/","/ja/");else if(s.href.match(/services-en\.html#/)){var a,a=(a=s.href).replace("services-en.html","services.html");window.location.href=a}else{var a=e+".html";window.location.href=a}});var c=document.querySelectorAll(".sticky");Stickyfill.add(c)})});